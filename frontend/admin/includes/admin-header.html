<!-- Mobile Sidebar Toggle -->
<button class="btn btn-link text-white d-lg-none" id="sidebarToggle">
    <i class="fas fa-bars"></i>
</button>

<!-- Admin Header -->
<header class="admin-header navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container-fluid px-0">
        <!-- Logo and Brand -->
        <a class="navbar-brand d-flex align-items-center ms-3" href="dashboard.html">
            <img src="../../assets/logo.png" alt="WaterBill NG" class="me-2" style="height: 32px;">
            <span class="d-none d-md-inline">WaterBill NG</span>
        </a>
        
        <!-- Mobile Toggle Button -->
        <button class="navbar-toggler me-3" type="button" data-bs-toggle="collapse" data-bs-target="#adminNavbar" 
                aria-controls="adminNavbar" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fas fa-ellipsis-v text-white"></i>
        </button>
        
        <!-- Navigation Links -->
        <div class="collapse navbar-collapse bg-dark" id="adminNavbar">
            <div class="d-flex flex-column flex-lg-row w-100">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="dashboard.html">
                            <i class="fas fa-tachometer-alt me-2"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="users.html">
                            <i class="fas fa-users me-2"></i> Users
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="payments.html">
                            <i class="fas fa-credit-card me-2"></i> Payments
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="faults.html">
                            <i class="fas fa-exclamation-triangle me-2"></i> Faults
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="manual-payments.html">
                            <i class="fas fa-money-bill-wave me-2"></i> Manual Payments
                        </a>
                    </li>
                </ul>
                
                <!-- User Menu -->
                <div class="d-flex align-items-center ms-lg-auto me-3">
                    <div class="dropdown">
                        <a href="#" class="nav-link dropdown-toggle text-white" id="userDropdown" 
                           data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user-circle me-1"></i>
                            <span class="d-none d-md-inline">Admin</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            <li><a class="dropdown-item" href="profile.html">
                                <i class="fas fa-user me-2"></i>Profile
                            </a></li>
                            <li><a class="dropdown-item" href="settings.html">
                                <i class="fas fa-cog me-2"></i>Settings
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="#" onclick="logout()">
                                <i class="fas fa-sign-out-alt me-2"></i>Logout
                            </a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>
</header>

<!-- Page Content Wrapper -->
<div class="content-wrapper">

<!-- Back Button (hidden by default, shown on non-dashboard pages) -->
<a href="dashboard.html" class="btn btn-outline-light back-to-dashboard d-none">
    <i class="fas fa-arrow-left me-2"></i> Back to Dashboard
</a>

<style>
/* Admin Header Styles */
body {
    padding-top: 56px; /* Height of navbar */
}
.admin-header {
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    z-index: 1030;
    padding: 0.5rem 0;
    transition: all 0.3s;
    margin-left: 0;
}

.admin-header.sidebar-active {
    margin-left: 250px;
}

.navbar-brand {
    font-weight: 600;
    font-size: 1.25rem;
}

.navbar-nav .nav-link {
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
    transition: all 0.2s;
}

.navbar-nav .nav-link:hover,
.navbar-nav .nav-link.active {
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
}

/* User dropdown */
.dropdown-menu {
    border: none;
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    border-radius: 8px;
    padding: 0.5rem 0;
    min-width: 12rem;
}

.dropdown-item {
    padding: 0.5rem 1.5rem;
    font-size: 0.9rem;
}

.dropdown-item:hover {
    background-color: #f8f9fa;
}

.dropdown-divider {
    margin: 0.25rem 0;
}

/* Notification badge */
.badge-notification {
    position: absolute;
    top: 0;
    right: 0;
    transform: translate(25%, -25%);
}

/* Responsive adjustments */
@media (max-width: 991.98px) {
    .admin-header {
        padding: 0.5rem;
    }
    
    .navbar-brand {
        font-size: 1.1rem;
    }
    
    .navbar-nav .nav-link {
        padding: 0.75rem 1rem;
    }
    
    .dropdown-menu {
        position: absolute;
        right: 1rem;
        left: auto;
    }
    
    /* Hide desktop navigation on mobile */
    #adminNavbar {
        position: fixed;
        top: 60px;
        left: 0;
        right: 0;
        background: #343a40;
        max-height: calc(100vh - 60px);
        overflow-y: auto;
        margin: 0;
        border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    .admin-header.sidebar-active {
        margin-left: 0;
    }
}

/* Dark mode support */
[data-bs-theme="dark"] #sidebar {
    background-color: #1a1d21;
    border-right: 1px solid #2c3034;
}

[data-bs-theme="dark"] #sidebar .sidebar-header {
    background-color: #1a1d21;
}

[data-bs-theme="dark"] .admin-header {
    background-color: #1a1d21 !important;
    border-bottom: 1px solid #2c3034;
}

[data-bs-theme="dark"] .dropdown-menu {
    background-color: #2c3034;
    border-color: #373b3e;
}

[data-bs-theme="dark"] .dropdown-item {
    color: #dee2e6;
}

[data-bs-theme="dark"] .dropdown-item:hover {
    background-color: #3d4247;
    color: #fff;
}

[data-bs-theme="dark"] .navbar-toggler {
    border-color: rgba(255,255,255,0.1);
}

[data-bs-theme="dark"] .navbar-toggler-icon {
    filter: invert(1);
}
</style>

<!-- Sidebar -->
<nav id="sidebar" class="d-lg-none">
    <div class="sidebar-header">
        <h4>WaterBill NG</h4>
    </div>
    <ul class="list-unstyled components">
        <li class="active">
            <a href="dashboard.html">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </a>
        </li>
        <li>
            <a href="users.html">
                <i class="fas fa-users"></i> Users
            </a>
        </li>
        <li>
            <a href="payments.html">
                <i class="fas fa-credit-card"></i> Payments
            </a>
        </li>
        <li>
            <a href="faults.html">
                <i class="fas fa-exclamation-triangle"></i> Faults
            </a>
        </li>
        <li>
            <a href="manual-payments.html">
                <i class="fas fa-money-bill-wave"></i> Manual Payments
            </a>
        </li>
    </ul>
</nav>

<!-- Overlay -->
<div class="overlay"></div>

<script>
// Add 'dashboard-page' class to body if on dashboard
if (window.location.pathname.endsWith('dashboard.html')) {
    document.body.classList.add('dashboard-page');
}

// Toggle sidebar on mobile
$(document).ready(function() {
    $('#sidebarToggle').on('click', function() {
        $('#sidebar').toggleClass('active');
        $('.overlay').toggleClass('active');
        $('body').toggleClass('sidebar-active');
    });
    
    // Close sidebar when clicking outside
    $('.overlay').on('click', function() {
        $('#sidebar').removeClass('active');
        $(this).removeClass('active');
        $('body').removeClass('sidebar-active');
    });
    
    // Close sidebar when a menu item is clicked (on mobile)
    $('#sidebar a').on('click', function() {
        if ($(window).width() < 992) {
            $('#sidebar').removeClass('active');
            $('.overlay').removeClass('active');
            $('body').removeClass('sidebar-active');
        }
    });
    
    // Handle window resize
    $(window).on('resize', function() {
        if ($(window).width() >= 992) {
            $('#sidebar').removeClass('active');
            $('.overlay').removeClass('active');
            $('body').removeClass('sidebar-active');
        }
    });
});

// Logout function
function logout() {
    if (confirm('Are you sure you want to logout?')) {
        window.location.href = '../../auth/logout.php';
    }
}
</script>
